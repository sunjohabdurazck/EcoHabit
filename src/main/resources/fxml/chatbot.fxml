<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="main.java.com.ecohabit.controller.ChatbotController">
   <top>
      <!-- Header Section -->
      <VBox styleClass="header-section">
         <HBox alignment="CENTER_LEFT" spacing="15" styleClass="header-bar">
            <padding>
               <Insets bottom="10" left="20" right="20" top="10" />
            </padding>
            
            <!-- Title and Status -->
            <VBox spacing="2">
               <Label styleClass="screen-title" text="AI Eco Assistant" />
               <HBox alignment="CENTER_LEFT" spacing="10">
                  <Circle fx:id="connectionStatusCircle" radius="5" fill="GREEN" />
                  <Label fx:id="chatStatusLabel" styleClass="status-label" text="Connected" />
                  <Separator orientation="VERTICAL" />
                  <Label fx:id="lastActiveLabel" styleClass="status-label" text="Last active: Now" />
               </HBox>
            </VBox>
            
            <Region HBox.hgrow="ALWAYS" />
            
            <!-- Chat Controls -->
            <HBox spacing="10">
               <ComboBox fx:id="chatModeComboBox" prefWidth="150" promptText="Select Mode" styleClass="mode-selector" />
               <Button fx:id="clearChatBtn" styleClass="action-button" text="Clear" />
               <Button fx:id="exportChatBtn" styleClass="action-button" text="Export" />
            </HBox>
         </HBox>
         
         <!-- Quick Actions Bar -->
         <HBox alignment="CENTER" spacing="10" styleClass="quick-actions-bar">
            <padding>
               <Insets bottom="15" left="20" right="20" top="5" />
            </padding>
            
            <FlowPane fx:id="quickActionsPane" alignment="CENTER" hgap="8" vgap="8">
               <Button fx:id="carbonTipsBtn" styleClass="quick-action-btn" text="🌱 Carbon Tips" />
               <Button fx:id="activitySuggestionsBtn" styleClass="quick-action-btn" text="🏃 Activities" />
               <Button fx:id="goalHelpBtn" styleClass="quick-action-btn" text="🎯 Goals" />
               <Button fx:id="dataAnalysisBtn" styleClass="quick-action-btn" text="📊 Analysis" />
               <Button fx:id="generalHelpBtn" styleClass="quick-action-btn" text="❓ Help" />
            </FlowPane>
         </HBox>
      </VBox>
   </top>

   <left>
      <!-- Sidebar - Chat History -->
      <VBox prefWidth="250" styleClass="sidebar">
         <padding>
            <Insets bottom="20" left="15" right="15" top="20" />
         </padding>
         
         <VBox fx:id="chatHistoryContainer" spacing="15">
            <!-- New Chat Button -->
            <Button fx:id="newChatBtn" maxWidth="Infinity" styleClass="new-chat-btn" text="+ New Chat" />
            
            <!-- Chat History Title -->
            <Label styleClass="sidebar-title" text="Recent Chats" />
            
            <!-- Previous Chats List -->
            <ListView fx:id="previousChatsListView" prefHeight="300" styleClass="chat-history-list" />
            
            <!-- Settings Section -->
            <Separator />
            <VBox spacing="10">
               <Label styleClass="sidebar-subtitle" text="Preferences" />
               <CheckBox fx:id="smartSuggestionsCheckBox" selected="true" text="Smart Suggestions" />
            </VBox>
         </VBox>
         
         <Region VBox.vgrow="ALWAYS" />
      </VBox>
   </left>

   <center>
      <!-- Main Chat Area -->
      <VBox styleClass="chat-area">
         <!-- Chat Messages Container -->
         <ScrollPane fx:id="chatScrollPane" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" VBox.vgrow="ALWAYS">
            <VBox fx:id="chatContainer" spacing="10" styleClass="chat-container">
               <padding>
                  <Insets bottom="15" left="20" right="20" top="15" />
               </padding>
            </VBox>
         </ScrollPane>
         
         <!-- Typing Indicator Area -->
         <HBox alignment="CENTER_LEFT" minHeight="30" spacing="10" styleClass="typing-area">
            <padding>
               <Insets left="20" right="20" />
            </padding>
            <ProgressIndicator fx:id="typingIndicator" maxHeight="20" maxWidth="20" visible="false" />
         </HBox>
         
         <!-- Message Input Area -->
         <HBox alignment="CENTER" spacing="10" styleClass="input-area">
            <padding>
               <Insets bottom="20" left="20" right="20" top="10" />
            </padding>
            
            <!-- Voice Input Button -->
            <Button fx:id="voiceButton" styleClass="voice-button" text="🎤" />
            
            <!-- Message Input Field -->
            <TextField fx:id="messageInput" maxWidth="Infinity" promptText="Ask me anything about eco-living..." styleClass="message-input" HBox.hgrow="ALWAYS" />
            
            <!-- Send Button -->
            <Button fx:id="sendButton" disable="true" styleClass="send-button" text="Send" />
         </HBox>
      </VBox>
   </center>
</BorderPane>